"use strict";function Dselect(e){this.param=e,this.Data=e.data,this.Selected=[],this.SelectedDom=[],this.color=e.color||"rgb(53,135,255)",this.module=e.module||"typeOne",this.width=e.width||"300px",this.group=e.group||"",this.key=e.key||"",this.allStyle={boxStyle:"\n            position:relative;\n            min-height:40px;\n            border:1px solid #ccc\n        ",SelectStyle:"\n            max-height:300px;\n            overflow-x: hidden;\n            overflow-y:auto;\n            position: absolute;\n            z-index: 1;top:100%;\n            left:-1px;\n            background:#fff;\n            display:none\n        ",InsurBoxStyle:"\n            display:block;\n            box-sizing:border-box;\n            outline:none;\n            text-align:left;\n            position: relative;\n            padding-bottom:5px;\n            padding-top:5px;\n            overflow: hidden;\n            min-height:30px;\n            top:0px;left:0px;\n            z-index: 10;\n        ",InsurBoxStyleM:"\n            padding-left:10px;\n            min-height:40px;\n            padding-top:8px;\n            padding-bottom:5px;\n            padding-right:25px;\n            box-sizing:border-box;\n        ",TapBtnStyle:"\n            height:100%;\n            width:25px;\n            display:flex;\n            background:#ccc;\n            top:0;\n            right:0;\n            align-items:center;\n            justify-content:center;\n            position:absolute;\n            cursor:pointer;\n            cursor-events:none\n        ",IconStyle:"\n            width:0px;\n            height:0px;\n            border:6px solid #ccc;\n            border-top:10px solid #666;\n            position:relative;\n            top:4px  \n        ",selectItemStyle:"\n            width:99%;\n            margin-top:3px;\n            margin-left:1px;\n            color:#333;\n            box-sizing: border-box;\n            padding: 5px 10px;\n            background: rgb(240,240,240);\n        ",InsurListStyle:"\n           padding:5px 6px;\n           padding-right:30px;\n           margin-left:10px;\n           margin-top:3px;\n           margin-bottom:5px;\n           position: relative;\n           z-index: 99;\n           display:block;\n           float:left;\n           color:#fff;\n           cursor: pointer;\n           pointer-events: all;\n           border-radius:3px \n        ",CloseIconStyle:'\n           display: flex;\n           position: absolute;\n           font-size:14px;\n           right:10px;\n           top:0px;\n           height:100%;\n           align-items:center;\n           color:#fff;\n           font-family:"微软雅黑";\n           font-style:normal\n        '},"typeTwo"==e.module&&(this.group=1),this.SelectorInit()}Dselect.prototype.SelectorInit=function(){this.createDom(),this.setStyle(),this.methods()},Dselect.prototype.createDom=function(){this.options=[],this.Box=document.querySelector(this.param.el),this.Select=document.createElement("div"),this.InsurBox=document.createElement("div"),this.Select.className="select","typeTwo"==this.module&&(console.log(8888),this.TapBtn=document.createElement("div"),this.Icon=document.createElement("i"),this.TapBtn.appendChild(this.Icon),this.Box.appendChild(this.TapBtn)),this.Data.forEach(function(e){var t=document.createElement("div");if(t.className="option",t.info=e,this.param.key){var n=this.param.key;t.innerHTML=e[n]}else t.innerHTML=e;this.options.push(t),this.Select.appendChild(t)}.bind(this)),this.Box.appendChild(this.InsurBox),this.Box.appendChild(this.Select)},Dselect.prototype.buildItem=function(){this.Data.forEach(function(e){var t=document.createElement("div");if(t.className="option",t.info=e,this.param.key){var n=this.param.key;t.innerHTML=e[n]}else t.innerHTML=e;this.options.push(t),this.Select.appendChild(t)}.bind(this))},Dselect.prototype.buildItemStyle=function(){var t=this;this.options.forEach(function(e){e.setAttribute("style",t.allStyle.selectItemStyle),e.onmouseenter=function(){this.style.background=t.color,this.style.color="white"},e.onmouseleave=function(){this.style.background="rgb(240,240,240)",this.style.color="#333"}}.bind(this))},Dselect.prototype.setStyle=function(){var t=this;this.Box.setAttribute("style",t.allStyle.boxStyle),this.Select.setAttribute("style",t.allStyle.SelectStyle),this.InsurBox.setAttribute("style",t.allStyle.InsurBoxStyle),"typeTwo"==this.module&&(this.TapBtn.setAttribute("style",t.allStyle.TapBtnStyle),this.Icon.setAttribute("style",t.allStyle.IconStyle),this.InsurBox.setAttribute("contenteditable",!0),this.InsurBox.setAttribute("style",t.allStyle.InsurBoxStyleM)),this.Box.style.width=this.width,this.Select.style.width=this.width,this.Select.style.border="1px solid "+this.color,this.options.forEach(function(e){e.setAttribute("style",t.allStyle.selectItemStyle),e.onmouseenter=function(){this.style.background=t.color,this.style.color="white"},e.onmouseleave=function(){this.style.background="rgb(240,240,240)",this.style.color="#333"}}.bind(this))},Dselect.prototype.methods=function(){var d=this;this.Select.onclick=function(e){if("option"==e.target.className&&-1==d.Selected.indexOf(e.target.info)){if(d.group)if(1==d.group)d.Selected=[e.target.info];else{if(d.Selected.length==d.group)return!0;d.Selected.push(e.target.info)}else d.Selected.push(e.target.info);d.SelectedChange(),d.Select.style.display="none",d.Box.style.border="1px solid #ccc"}},this.InsurBox.onclick=function(e){"none"==d.Select.style.display?(d.Select.style.display="block",d.Box.style.border="1px solid "+d.color):(d.Select.style.display="none",d.Box.style.border="1px solid #ccc")},this.InsurBox.onfocus=function(e){this.onkeyup=function(){if(d.Selected[0]=this.innerHTML,d.param.match){d.Select.innerHTML="",d.options=[];var p=this.innerHTML;""==this.innerHTML?d.buildItem():(d.Data.forEach(function(e){var t=d.key?e[d.key].toString():e;if("greedy"==d.param.match){(l=document.createElement("div")).className="option",l.info=e;for(var n=0;n<t.length;n++){var i=document.createElement("span");i.innerHTML=t[n];for(var o=0;o<p.length;o++)-1!=t[n].indexOf(p[o])&&(i.style.color="red",l.isMatch=!0);l.appendChild(i)}l.isMatch&&(d.Select.appendChild(l),d.options.push(l))}else if(-1!=t.indexOf(p)){var l,s=t.indexOf(p);(l=document.createElement("div")).className="option",l.info=e;var r=document.createElement("span"),c=document.createElement("span"),a=document.createElement("span");r.innerHTML=t.substring(0,s),c.innerHTML=t.substring(s,s+p.length),a.innerHTML=t.substring(s+p.length,t.length),c.style.color="red",l.appendChild(r),l.appendChild(c),l.appendChild(a),d.Select.appendChild(l),d.options.push(l)}}),0==d.options.length&&d.buildItem()),d.buildItemStyle()}}},"typeTwo"==this.module&&(this.TapBtn.onclick=function(e){"none"==d.Select.style.display?(d.Select.style.display="block",d.Box.style.border="1px solid "+d.color):(d.Select.style.display="none",d.Box.style.border="1px solid #ccc")})},Dselect.prototype.SelectedChange=function(){var o=this;if(this.InsurBox.innerHTML="",this.module&&"typeOne"!=this.module){if("typeTwo"==this.module)if(this.param.key){var e=this.param.key;this.InsurBox.innerHTML=this.Selected[0][e]}else this.InsurBox.innerHTML=this.Selected[0]}else this.Selected.forEach(function(e){var t=document.createElement("div"),n=document.createElement("i");if(t.setAttribute("style",o.allStyle.InsurListStyle),t.style.background=o.color,n.innerHTML="X",n.setAttribute("style",o.allStyle.CloseIconStyle),n.info=e,o.param.key){var i=o.param.key;t.innerHTML=e[i]}else t.innerHTML=e;t.appendChild(n),o.SelectedDom.push(t),o.InsurBox.appendChild(t)}),this.SelectedDom.forEach(function(e){e.onclick=function(e){if(e.stopPropagation(),"I"==e.target.nodeName){var t=o.Selected.indexOf(e.target.info);o.Selected.splice(t,1),o.SelectedChange()}}})},Dselect.prototype.emit=function(){return this.Selected};